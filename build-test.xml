<?xml version="1.0" encoding="UTF-8"?>
<project name="build-test">

  <path id="configurator.classpath">
    <fileset dir="dist">
      <include name="idea-configurator*jar"/>
    </fileset>
    <pathelement location="lib/groovy-all-1.5.6.jar"/>
  </path>
  <taskdef classpathref="configurator.classpath" resource="taskdef.properties"/>


  <property name="stdout.only" value="true"/>


  <target name="source.folder">
    <ideamodule>
      <src location="src"/>
    </ideamodule>
  </target>

  
  <target name="source.folders">
    <ideamodule>
      <src location="src1"/>
      <src location="src2"/>
    </ideamodule>
  </target>

  <target name="source.tests.folders">
    <ideamodule>
      <src location="src"/>
      <tests location="test1"/>
    </ideamodule>
  </target>


  <!-- used by jarToModule tests -->
  <path id="dumb.path">
    <pathelement location="survives.jar"/>
    <pathelement location="lib/module2.jar"/>
    <pathelement location="lib/dumb.jar"/>
    <pathelement location="lib/garble.jar"/>
  </path>


  <target name="jarToMmodule">
    <ideamodule classpathref="dumb.path">
      <dependencies>
        <jartomodule jarName="garble.jar"/>
        <jarToModule jarPattern=".*module2.jar" moduleName="dumbModule2" exported="true"/>
        <jarToModule jarPattern=".*dumb.jar" moduleName="dumbModule"/> <!-- maps name -->
      </dependencies>
    </ideamodule>
  </target>


  <target name="jarsToModules.top.level.declaration">
    <ideamodule classpathref="dumb.path" jarsToModules="dumb.jar, garble.jar">
    </ideamodule>
  </target>

  <target name="groovy.plain">
    <ideamodule>
      <facets>
        <groovy/>
      </facets>
      <src location="src"/>
    </ideamodule>
  </target>

  <target name="groovy.sdk">
    <ideamodule>
      <facets>
        <groovy sdk="groovy-1.5.6"/>
      </facets>
      <src location="src"/>
    </ideamodule>
  </target>

  <target name="groovy.sdk.none">
    <ideamodule>
      <facets>
        <groovy sdk="NONE"/>
      </facets>
      <src location="src"/>
    </ideamodule>
  </target>


  <target name="path.filter">
    <ideamodule classpathref="dumb.path">
      <dependencies>
        <filter pattern=".*module2.jar"/>
      </dependencies>
    </ideamodule>
  </target>


  <target name="spring.complex">
    <ideamodule>
      <facets>
        <spring>
          <files name="Production Fileset">
            <file location="src/spring-conf.xml"/>
            <file location="src/spring-conf2.xml"/>
          </files>
          <files name="test fileset" parentFilesetName="Production Fileset">
            <file location="src/spring-conf3.xml"/>
          </files>
          <files name="another fileset"
                 springFiles="src/spring-conf4.xml, src/springconf5.xml"/>
        </spring>
      </facets>
    </ideamodule>
  </target>

  
  <ideamodule>
    <facets>
      <gwt compilerParams="-Dfoo=1 -Dbar=2"
           compilerMaxHeap="256"
           compilerOutputPath="/foo/bar/output"
           outputStyle="DETAILED"
           gwtSdkUrl="/path/to/gwt-1.5"
           runGwtCompilerOnMake="on"
           intoWebFacet="web-facet-name"/>
    </facets>
    <src location="foobly"/>
  </ideamodule>

</project>

